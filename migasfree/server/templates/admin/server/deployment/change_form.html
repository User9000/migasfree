{% extends "admin/change_form.html" %}
{% load admin_urls i18n server_tags bootstrapped_goodies_tags %}

{% block content %}
<form class="form-horizontal" {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.model_name }}_form" novalidate>
    {% csrf_token %}

    {% if errors %}
        <div class="alert alert-danger">
            {% if errors|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}

            {{ adminform.form.non_field_errors }}
        </div>
    {% endif %}

    <div class="form-actions">
        {% block submit_buttons_top %}{% submit_row %}{% endblock %}
    </div>

<div class="row">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans 'General' %}
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p>
                            <label for="id_enabled">{% trans 'enabled' %}</label>&nbsp;
                            {% dab_field_rendering adminform.form.enabled %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12{% if adminform.errors.name %} has-error{% endif %}">
                        <p>
                            <label class="control-label required" for="id_name">
                                <span class="fas fa-info" title="{% trans 'name' %}"></span>
                            </label>
                            {% dab_field_rendering adminform.form.name %}
                            {% if adminform.errors.name %}
                                <span class="text-danger">{{ adminform.errors.name|striptags }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12{% if adminform.errors.project %} has-error{% endif %}">
                        <p title="{% trans 'project' %}">
                            <label class="control-label required" for="id_project">
                                <span class="far fa-sitemap"></span>
                            </label>
                            {% dab_field_rendering adminform.form.project %}
                            {% if adminform.errors.project %}
                                <span class="text-danger">{{ adminform.errors.project|striptags }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12{% if adminform.errors.comment %} has-error{% endif %}">
                        <p title="{% trans 'comment' %}">
                            <label class="control-label" for="id_comment">
                                <span class="fas fa-comment"></span>
                            </label>
                            {% dab_field_rendering adminform.form.comment %}
                            {% if adminform.errors.comment %}
                                <span class="text-danger">{{ adminform.errors.comment|striptags }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans 'To Whom (Attributes)' %}
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p title="{% trans 'included attributes' %}">
                            <label class="control-label" for="id_included_attributes_text">
                                <span class="fas fa-thumbs-up"></span>
                            </label>
                            {% dab_field_rendering adminform.form.included_attributes %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p title="{% trans 'excluded attributes' %}">
                            <label class="control-label" for="id_excluded_attributes_text">
                                <span class="fas fa-thumbs-down"></span>
                            </label>
                            {% dab_field_rendering adminform.form.excluded_attributes %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans 'What (Packages)' %}
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p title="{% trans 'available packages' %}">
                            <label class="control-label" for="id_available_packages_text">
                                <span class="far fa-cubes"></span>
                            </label>
                            {% dab_field_rendering adminform.form.available_packages %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p title="{% trans 'packages to install' %}">
                            <label class="control-label" for="id_packages_to_install">
                                <span class="far fa-download"></span>
                            </label>
                            {% dab_field_rendering adminform.form.packages_to_install %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p title="{% trans 'packages to remove' %}">
                            <label class="control-label" for="id_packages_to_remove">
                                <span class="far fa-upload"></span>
                            </label>
                            {% dab_field_rendering adminform.form.packages_to_remove %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans 'Packages by default' %}
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p>
                            <label class="control-label" for="id_default_preincluded_packages">
                                {% trans 'default pre-included packages' %}
                            </label>
                            {% dab_field_rendering adminform.form.default_preincluded_packages %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p>
                            <label class="control-label" for="id_default_included_packages">
                                {% trans 'default included packages' %}
                            </label>
                            {% dab_field_rendering adminform.form.default_included_packages %}
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p>
                            <label class="control-label" for="id_default_excluded_packages">
                                {% trans 'default excluded packages' %}
                            </label>
                            {% dab_field_rendering adminform.form.default_excluded_packages %}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 col-xs-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                {% trans 'When (Schedule)' %}
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-4 col-xs-4 text-center{% if adminform.errors.start_date %} has-error{% endif %}" title="{% trans 'start date' %}">
                        {% dab_field_rendering adminform.form.start_date %}
                        {% if adminform.errors.start_date %}
                            <span class="text-danger">{{ adminform.errors.start_date|striptags }}</span>
                        {% endif %}
                    </div>
                    <div class="col-md-4 col-xs-4 text-center">
                        <label class="control-label pull-left" for="id_schedule" title="{% trans 'Schedule' %}">
                            <span class="far fa-calendar-alt">&nbsp;</span>
                        </label>
                        {% dab_field_rendering adminform.form.schedule %}
                    </div>
                    {% if original.schedule %}
                    <div class="col-md-4 col-xs-4 text-center">
                        <span class="far fa-chart-line" title="{% trans 'time line' %}">&nbsp;</span>
                        {% include "includes/deployment_timeline.html" %}
                    </div>
                    {% endif %}
                </div>
                {% if original.schedule %}
                <div class="row">
                    <div class="col-md-12 col-xs-12">
                        <p id="computers-delay" class="lead text-center">{% trans 'Provided Computers / Delay' %}</p>
                        <object data="{% url 'provided_computers' %}?id={{ object_id }}" class="stat-embeded">
                            <embed src="{% url 'provided_computers' %}?id={{ object_id }}"
                                   class="stat-embeded"></embed>
                        </object>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

    <div class="form-actions">
        {% block submit_buttons_bottom %}{% submit_row %}{% endblock %}
    </div>
</form>
{% endblock %}
